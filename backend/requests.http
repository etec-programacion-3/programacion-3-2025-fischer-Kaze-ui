# Variables Globales (Ajustar antes de usar)
@host = http://localhost:8000

# --- INICIA SESIÓN PRIMERO ---
# 1. Registra un Admin (ej: 'admin_user') y un Cliente (ej: 'client_user') desde el Frontend.
# 2. Promueve a 'admin_user' usando las instrucciones del README.md.
# 3. Ejecuta los logins de abajo y copia los tokens.

@admin_username = admin_user
@admin_password = tu_password_admin
@admin_token = {{login_admin.response.body.access_token}}

@user_username = client_user
@user_password = tu_password_cliente
@user_token = {{login_user.response.body.access_token}}


### =============================================
### Issue 9: Autenticación (JWT)
### =============================================

### (Admin) Iniciar Sesión para obtener Token
# @name login_admin
POST {{host}}/api/auth/login
Content-Type: application/x-www-form-urlencoded

username={{admin_username}}
&password={{admin_password}}
&grant_type=password

### (Cliente) Iniciar Sesión para obtener Token
# @name login_user
POST {{host}}/api/auth/login
Content-Type: application/x-www-form-urlencoded

username={{user_username}}
&password={{user_password}}
&grant_type=password

### =============================================
### Issue 3/4/10: Productos (CRUD Admin)
### =============================================

### (ADMIN) Crear un producto
# Este endpoint requiere un token de ADMIN
POST {{host}}/api/products
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "nombre_producto": "Producto de Prueba (HTTP)",
  "descripcion": "Creado desde requests.http",
  "marca": "REST Client",
  "categoria": "Pruebas",
  "precio": 1.99,
  "stock": 10
}

### (Público) Listar productos
GET {{host}}/api/products?page=1&limit=5

### (ADMIN) Borrar un producto (Cambiar el 1 por un ID real)
DELETE {{host}}/api/products/1
Authorization: Bearer {{admin_token}}


### =============================================
### Issue 5/6: Carrito y Pedidos (Cliente)
### =============================================

### (Cliente) Añadir al carrito (Producto ID 1)
POST {{host}}/api/cart/add
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "id_producto": 1,
  "cantidad": 1
}

### (Cliente) Ver mi carrito
GET {{host}}/api/cart
Authorization: Bearer {{user_token}}

### (Cliente) Crear Pedido (Checkout)
POST {{host}}/api/orders
Authorization: Bearer {{user_token}}